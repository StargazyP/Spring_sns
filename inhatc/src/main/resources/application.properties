spring.datasource.url=jdbc:mysql://localhost:3306/member?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul

# 데이터베이스 인증 정보 (환경 변수 사용 권장)
# 개발 환경에서는 기본값 사용, 프로덕션에서는 환경 변수 필수
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:root}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true  
spring.jpa.properties.hibernate.show_sql=true  
spring.jpa.hibernate.ddl-auto=update  
# 파일 업로드 크기 제한 (개발 환경: 10MB로 통일)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
server.port=8080
server.http2.enabled=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# 세션 설정
# 세션 타임아웃: 30분 (1800초)
server.servlet.session.timeout=30m
# 세션 쿠키 설정
server.servlet.session.cookie.name=JSESSIONID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
# 세션 고정 공격 방지: 로그인 시 세션 ID 변경
server.servlet.session.tracking-modes=cookie

# 로그 레벨 설정
logging.level.root=INFO
logging.level.kr.co.inhatc=DEBUG
logging.level.org.hibernate.SQL=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.type.descriptor.sql=WARN
# Broken Pipe 에러는 정상적인 상황이므로 DEBUG 레벨로 처리
logging.level.org.apache.catalina.connector.ClientAbortException=DEBUG
logging.level.org.springframework.web.context.request.async.AsyncRequestNotUsableException=DEBUG
# Hibernate 쿼리 최적화 경고는 WARN 레벨 유지
logging.level.org.hibernate.orm.query=WARN

# Hibernate 배치 처리 설정 (N+1 문제 해결)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# 로그 파일 설정 (선택사항)
# logging.file.name=logs/inhatc.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# Spring Boot Actuator 설정
# Health Check 엔드포인트 활성화
management.endpoints.web.exposure.include=health,info,metrics,prometheus
# Health Check 상세 정보 표시 (프로덕션에서는 false 권장)
management.endpoint.health.show-details=when-authorized
# Actuator 엔드포인트 기본 경로
management.endpoints.web.base-path=/actuator
# Health Check 커스텀 설정
management.health.diskspace.enabled=true
management.health.db.enabled=true

# 파일 저장 경로 (개발 환경)
# Windows 개발 환경 기본값
app.upload.base-dir=${UPLOAD_BASE_DIR:C:/Users/jdajs/spring test/inhatc/src/main/resources}
app.upload.posts-dir=${UPLOAD_POSTS_DIR:C:/Users/jdajs/spring test/inhatc/src/main/java/kr/co/inhatc/inhatc}
app.upload.profile-dir=${UPLOAD_PROFILE_DIR:C:/Users/jdajs/spring test/inhatc/src/main/resources/static}
app.upload.messages-dir=${UPLOAD_MESSAGES_DIR:C:/Users/jdajs/spring test/inhatc/src/main/resources/static}


